"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_virtual/_rollupPluginBabelHelpers.js"),t=require("react"),n=require("../box/box.js"),r=require("../utils/common-helpers.js"),a=require("../text/text.js"),l=require("./base-field.module.css.js"),u=require("../stack/stack.js"),i=require("../spinner/spinner.js"),s=require("../columns/columns.js");function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}var c=o(t);function d(e){return"error"===e?"danger":"success"===e?"positive":"secondary"}function m({id:e,children:t,tone:r}){return c.createElement(a.Text,{as:"p",tone:d(r),size:"copy",id:e},"loading"===r?c.createElement(n.Box,{as:"span",marginRight:"xsmall",display:"inlineFlex",className:l.default.loadingIcon},c.createElement(i.Spinner,{size:16})):null,t)}function f({children:e,tone:t}){return c.createElement(a.Text,{tone:d(t),size:"copy"},e)}function p({value:e,maxLength:t}){if(!t)return{count:null,tone:"neutral"};const n=String(e||"").length;return{count:n+"/"+t,tone:t-n<=10?"error":"neutral"}}exports.BaseField=function({variant:t="default",label:i,value:o,auxiliaryLabel:d,message:x,tone:b="neutral",className:g,children:h,maxWidth:E,maxLength:v,hidden:j,"aria-describedby":y,id:q}){const L=r.useId(q),B=r.useId(),S=p({value:o,maxLength:v}),[O,_]=c.useState(S.count),[C,N]=c.useState(S.tone),k=null!=y?y:x?B:null,w=e.objectSpread2(e.objectSpread2({id:L,value:o},k?{"aria-describedby":k}:{}),{},{"aria-invalid":"error"===b||void 0,onChange(e){if(!v)return;const t=p({value:e.currentTarget.value,maxLength:v});_(t.count),N(t.tone)}});return c.useEffect((function(){if(!v)return;const e=p({value:o,maxLength:v});_(e.count),N(e.tone)}),[v,o]),c.createElement(u.Stack,{space:"xsmall",hidden:j},c.createElement(n.Box,{className:[g,l.default.container,"error"===b?l.default.error:null,"bordered"===t?l.default.bordered:null],maxWidth:E},i||d?c.createElement(n.Box,{as:"span",display:"flex",justifyContent:"spaceBetween",alignItems:"flexEnd"},c.createElement(a.Text,{size:"bordered"===t?"caption":"body",as:"label",htmlFor:L},i?c.createElement("span",{className:l.default.primaryLabel},i):null),d?c.createElement(n.Box,{className:l.default.auxiliaryLabel,paddingLeft:"small"},d):null):null,h(w)),x||O?c.createElement(s.Columns,{align:"right",space:"small",maxWidth:E},x?c.createElement(s.Column,{width:"auto"},c.createElement(m,{id:B,tone:b},x)):null,O?c.createElement(s.Column,{width:"content"},c.createElement(f,{tone:C},O)):null):null)},exports.FieldMessage=m;
//# sourceMappingURL=base-field.js.map
