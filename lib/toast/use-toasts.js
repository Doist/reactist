"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_virtual/_rollupPluginBabelHelpers.js"),t=require("react"),a=require("@ariakit/react"),s=require("../utils/common-helpers.js"),o=require("../box/box.js"),n=require("../stack/stack.js"),u=require("./static-toast.js"),i=require("./toast.module.css.js"),r=require("./toast-animation.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(t);const d=["toastId"],f=c.default.forwardRef((function({message:t,description:a,icon:s,action:o,autoDismissDelay:n,dismissLabel:i,showDismissButton:r=!0,toastId:l,onDismiss:d,onRemoveToast:f},m){const[p,b]=c.default.useState(Boolean(n)),j=c.default.useRef(),k=c.default.useCallback((function(){b(!0)}),[]),v=c.default.useCallback((function(){b(!1),clearTimeout(j.current),j.current=void 0}),[]),x=c.default.useCallback((function(){f(l),null==d||d()}),[d,f,l]);c.default.useEffect((function(){if(p&&n)return j.current=window.setTimeout(x,1e3*n),v}),[n,x,v,p]);const C=c.default.useMemo(()=>u.isActionObject(o)?e.objectSpread2(e.objectSpread2({},o),{},{onClick:function(){o&&(o.onClick(),x())}}):o,[o,x]);return c.default.createElement(u.StaticToast,{ref:m,message:t,description:a,icon:s,action:C,onDismiss:r?x:void 0,dismissLabel:i,onMouseEnter:v,onMouseLeave:k})})),m=c.default.createContext(()=>()=>{});function p(){return c.default.useContext(m)}exports.Toast=function(e){const t=p(),a=c.default.useRef(e);return c.default.useEffect(()=>t(a.current),[t]),null},exports.ToastsProvider=function({children:t,padding:u="large",defaultAutoDismissDelay:l=10,defaultDismissLabel:p="Close",containerClassName:b}){const[j,k]=c.default.useState([]),{mappedRef:v,animateRemove:x}=r.useToastsAnimation(),C=c.default.useCallback((function(e){x(e,()=>{k(t=>{const a=t.findIndex(t=>t.toastId===e);if(a<0)return t;const s=[...t];return s.splice(a,1),s})})}),[x]),D=c.default.useCallback((function(t){const a=s.generateElementId("toast"),o=e.objectSpread2(e.objectSpread2({autoDismissDelay:l,dismissLabel:p},t),{},{toastId:a});return k(e=>[...e,o]),()=>C(a)}),[l,p,C]);return c.default.createElement(m.Provider,{value:D},t,c.default.createElement(a.Portal,null,0===j.length?null:c.default.createElement(o.Box,{className:[i.default.stackedToastsView,b],position:"fixed",width:"full",paddingX:u,paddingBottom:u,"data-testid":"toasts-container"},c.default.createElement(n.Stack,{space:"medium"},j.map(t=>{let{toastId:a}=t,s=e.objectWithoutProperties(t,d);return c.default.createElement(f,e.objectSpread2({key:a,ref:v(a),toastId:a,onRemoveToast:C},s))})))))},exports.useToasts=p;
//# sourceMappingURL=use-toasts.js.map
